{"version":3,"sources":["webpack:///static/js/client.b491f7b7165283e2dd21.js","webpack:///./index.js","webpack:///./~/react-dom/index.js","webpack:///./src/components/app.jsx","webpack:///./src/components/connect.jsx","webpack:///./src/components/baseplane.jsx","webpack:///./src/components/brickshape.jsx","webpack:///./src/bluetooth/ble.js","webpack:///./src/components/driver.jsx","webpack:///./src/bluetooth/order.js","webpack:///./src/components/message.jsx"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","_react","React","_reactDom","ReactDOM","_app","render","createElement","App","document","getElementById","e","Error","code","_interopRequireDefault","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","undefined","_createClass","defineProperties","target","props","i","length","descriptor","protoProps","staticProps","_react2","_connect","_driver","_message","_React$Component","this","_this","getPrototypeOf","state","connected","device","showMessage","message","navigator","bluetooth","__html","Message","show","Driver","bind","Connect","connect","disconnect","bleDevice","setState","Component","_baseplane","_brickshape","_ble","context","bluetoothDevice","BluetoothDevice","onDisconnected","addService","addCharacteristic","_this2","Baseplate","width","height","BrickShape","bricks","shapes","cells","classShape","onTouchEnd","_this3","then","getService","bluetoothService","getCharacteristic","setTimeout","error","msg","defaultProps","x","y","screen","window","innerWidth","innerHeight","sizeX","Math","floor","sizeY","size","grid","nbOfCellsX","ceil","nbOfCellsY","minX","maxX","minY","maxY","sizeElt","style","className","divs","push","children","forEach","child","selectElts","querySelectorAll","map","brick","join","elt","onTouchStart","activeClassShape","addEventListener","elem","BluetoothService","name","disconnectFct","services","server","id","uuid","cId","characteristics","BluetoothCharacteristic","Promise","resolve","filters","keys","requestDevice","getDevice","gatt","service","getPrimaryService","serviceId","serv","characteristicId","charact","characteristic","_this4","arrayBuffer","reject","writeValue","_order","timeOutAction","timeOutSession","move","clearTimeout","timeOut","direction","write","dataToSend","Order","color","codeByte","headerBytes","bytesValue","buf","ArrayBuffer","bufView","Uint8Array","idx","dangerouslySetInnerHTML"],"mappings":"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","file":"static/js/client.b491f7b7165283e2dd21.js","sourcesContent":["webpackJsonp([0,2],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tvar _reactDom = __webpack_require__(28);\n\t\n\tvar ReactDOM = _interopRequireWildcard(_reactDom);\n\t\n\tvar _app = __webpack_require__(29);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tReactDOM.render(React.createElement(_app.App, null), document.getElementById(\"app\"));\n\t\n\t//application\n\n/***/ },\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"react/lib/ReactDOM\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.App = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _connect = __webpack_require__(30);\n\t\n\tvar _driver = __webpack_require__(34);\n\t\n\tvar _message = __webpack_require__(36);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar App = exports.App = function (_React$Component) {\n\t  _inherits(App, _React$Component);\n\t\n\t  function App(props) {\n\t    _classCallCheck(this, App);\n\t\n\t    var _this = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this, props));\n\t\n\t    _this.state = { connected: false, device: null, showMessage: false, message: \"\" };\n\t    if (!navigator.bluetooth) {\n\t      _this.state.showMessage = true;\n\t      _this.state.message = { __html: \"Interface Web Bluetooth indisponible. Veuillez l'activer :<p><a class='link' target=\\\"_blank\\\" href=\\\"chrome://flags/#enable-web-bluetooth\\\">chrome://flags/#enable-web-bluetooth</a></p>\" };\n\t    }\n\t    return _this;\n\t  }\n\t\n\t  _createClass(App, [{\n\t    key: \"render\",\n\t    value: function render() {\n\t      return _react2.default.createElement(\n\t        \"div\",\n\t        null,\n\t        _react2.default.createElement(_message.Message, { show: this.state.showMessage, message: this.state.message }),\n\t        !this.state.connected ? _react2.default.createElement(_connect.Connect, { connect: this.connect.bind(this), disconnect: this.disconnect.bind(this), showMessage: this.showMessage.bind(this) }) : _react2.default.createElement(_driver.Driver, { device: this.state.device, showMessage: this.showMessage.bind(this) })\n\t      );\n\t    }\n\t  }, {\n\t    key: \"connect\",\n\t    value: function connect(bleDevice) {\n\t      this.setState({ connected: true, device: bleDevice });\n\t    }\n\t  }, {\n\t    key: \"disconnect\",\n\t    value: function disconnect() {\n\t      this.setState({ connected: false, device: null });\n\t    }\n\t  }, {\n\t    key: \"showMessage\",\n\t    value: function showMessage(message) {\n\t      if (message) {\n\t        this.setState({ showMessage: true, message: { __html: message } });\n\t      } else {\n\t        this.setState({ showMessage: false, message: null });\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return App;\n\t}(_react2.default.Component);\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Connect = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tvar _baseplane = __webpack_require__(31);\n\t\n\tvar _brickshape = __webpack_require__(32);\n\t\n\tvar _ble = __webpack_require__(33);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Connect = exports.Connect = function (_React$Component) {\n\t  _inherits(Connect, _React$Component);\n\t\n\t  function Connect(props, context) {\n\t    _classCallCheck(this, Connect);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Connect.__proto__ || Object.getPrototypeOf(Connect)).call(this, props, context));\n\t\n\t    _this.bluetoothDevice = new _ble.BluetoothDevice(\"LEO\", _this.onDisconnected.bind(_this));\n\t    _this.bluetoothDevice.addService(\"sCommand\", \"6e400001-b5a3-f393-e0a9-e50e24dcca9e\");\n\t    _this.bluetoothDevice.addCharacteristic(\"sCommand\", \"cCommand\", \"6e400002-b5a3-f393-e0a9-e50e24dcca9e\");\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Connect, [{\n\t    key: \"render\",\n\t    value: function render() {\n\t      var _this2 = this;\n\t\n\t      return React.createElement(\n\t        _baseplane.Baseplate,\n\t        { width: 18, height: 26 },\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[0].cells, classShape: \"lego blue upper\" }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[1].cells, onTouchEnd: function onTouchEnd(e) {\n\t            return _this2.connect();\n\t          }, classShape: \"lego grey upper\" })\n\t      );\n\t    }\n\t  }, {\n\t    key: \"connect\",\n\t    value: function connect() {\n\t      var _this3 = this;\n\t\n\t      console.log(\"connexion\");\n\t      this.showMessage(\"Connexion à Léo en cours...\");\n\t      this.bluetoothDevice.connect().then(function () {\n\t        return _this3.bluetoothDevice.getService(\"sCommand\");\n\t      }).then(function (bluetoothService) {\n\t        return bluetoothService.getCharacteristic(\"cCommand\");\n\t      }).then(function () {\n\t        _this3.showMessage(\"Vous êtes maintenant connecté à Léo... à vous de jouer !\");\n\t        setTimeout(function () {\n\t          if (_this3.props.connect) {\n\t            _this3.showMessage(\"\");\n\t            _this3.props.connect(_this3.bluetoothDevice);\n\t          }\n\t        }, 1000);\n\t      }).catch(function (error) {\n\t        _this3.showMessage(\"Erreur lors de la connexion à Léo : \" + error);\n\t        console.log(error);\n\t        setTimeout(function () {\n\t          _this3.showMessage();\n\t        }, 3000);\n\t      });\n\t    }\n\t  }, {\n\t    key: \"onDisconnected\",\n\t    value: function onDisconnected() {\n\t      if (this.props.disconnect) {\n\t        this.props.disconnect();\n\t      }\n\t    }\n\t  }, {\n\t    key: \"showMessage\",\n\t    value: function showMessage(msg) {\n\t      if (this.props.showMessage) {\n\t        this.props.showMessage(msg);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Connect;\n\t}(React.Component);\n\t\n\tConnect.defaultProps = {\n\t  shapes: [{ cells: [\n\t    //L\n\t    { x: 3, y: 2 }, { x: 3, y: 3 }, { x: 3, y: 4 }, { x: 3, y: 5 }, { x: 3, y: 6 }, { x: 4, y: 6 }, { x: 5, y: 6 }, { x: 6, y: 6 },\n\t    //E\n\t    { x: 8, y: 2 }, { x: 8, y: 3 }, { x: 8, y: 5 }, { x: 8, y: 6 }, { x: 9, y: 2 }, { x: 10, y: 2 }, { x: 11, y: 2 }, { x: 9, y: 4 }, { x: 10, y: 4 }, { x: 9, y: 6 }, { x: 10, y: 6 }, { x: 11, y: 6 },\n\t    // O\n\t    { x: 13, y: 2 }, { x: 13, y: 3 }, { x: 13, y: 4 }, { x: 13, y: 5 }, { x: 13, y: 6 }, { x: 14, y: 2 }, { x: 15, y: 2 }, { x: 14, y: 6 }, { x: 15, y: 6 }, { x: 16, y: 6 }, { x: 16, y: 3 }, { x: 16, y: 4 }, { x: 16, y: 5 }]\n\t  }, { cells: [{ x: 5, y: 12 }, { x: 6, y: 12 }, { x: 6, y: 13 }, { x: 7, y: 13 }, { x: 7, y: 14 }, { x: 8, y: 14 }, { x: 8, y: 15 }, { x: 5, y: 20 }, { x: 6, y: 20 }, { x: 6, y: 19 }, { x: 7, y: 19 }, { x: 7, y: 18 }, { x: 8, y: 18 }, { x: 8, y: 17 }, { x: 9, y: 10 }, { x: 9, y: 11 }, { x: 9, y: 12 }, { x: 9, y: 13 }, { x: 9, y: 14 }, { x: 9, y: 15 }, { x: 9, y: 16 }, { x: 9, y: 17 }, { x: 9, y: 18 }, { x: 9, y: 19 }, { x: 9, y: 20 }, { x: 9, y: 21 }, { x: 9, y: 22 }, { x: 10, y: 10 }, { x: 10, y: 11 }, { x: 10, y: 12 }, { x: 10, y: 13 }, { x: 10, y: 14 }, { x: 10, y: 15 }, { x: 10, y: 16 }, { x: 10, y: 17 }, { x: 10, y: 18 }, { x: 10, y: 19 }, { x: 10, y: 20 }, { x: 10, y: 21 }, { x: 10, y: 22 }, { x: 11, y: 11 }, { x: 11, y: 12 }, { x: 12, y: 12 }, { x: 12, y: 13 }, { x: 13, y: 13 }, { x: 13, y: 14 }, { x: 13, y: 15 }, { x: 14, y: 14 }, { x: 12, y: 15 }, { x: 12, y: 16 }, { x: 11, y: 16 }, { x: 12, y: 17 }, { x: 13, y: 17 }, { x: 13, y: 18 }, { x: 13, y: 19 }, { x: 14, y: 18 }, { x: 12, y: 19 }, { x: 12, y: 20 }, { x: 11, y: 20 }, { x: 11, y: 21 }]\n\t  }]\n\t};\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Baseplate = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Baseplate = exports.Baseplate = function (_React$Component) {\n\t  _inherits(Baseplate, _React$Component);\n\t\n\t  function Baseplate(props, context) {\n\t    _classCallCheck(this, Baseplate);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Baseplate.__proto__ || Object.getPrototypeOf(Baseplate)).call(this, props, context));\n\t\n\t    var screen = {\n\t      width: window.innerWidth,\n\t      height: window.innerHeight\n\t    };\n\t\n\t    var sizeX = screen.width / _this.props.width;\n\t    sizeX = sizeX > 40 ? 40 : Math.floor(sizeX);\n\t    var sizeY = screen.height / _this.props.height;\n\t    sizeY = sizeY > 40 ? 40 : Math.floor(sizeY);\n\t\n\t    if (sizeX < sizeY) sizeY = sizeX;\n\t    if (sizeY < sizeX) sizeX = sizeY;\n\t\n\t    var size = sizeX;\n\t\n\t    var grid = {\n\t      nbOfCellsX: Math.ceil(Math.ceil(screen.width / size) / 2) * 2,\n\t      nbOfCellsY: Math.ceil(Math.ceil(screen.height / size) / 2) * 2\n\t    };\n\t\n\t    grid.minX = (grid.nbOfCellsX - _this.props.width) / -2;\n\t    grid.maxX = (grid.nbOfCellsX - _this.props.width) / 2 + 1 + _this.props.width;\n\t    grid.minY = (grid.nbOfCellsY - _this.props.height) / -2;\n\t    grid.maxY = (grid.nbOfCellsY - _this.props.height) / 2 + 1 + _this.props.height;\n\t    grid.width = grid.nbOfCellsX * size;\n\t    grid.height = grid.nbOfCellsY * size;\n\t    grid.sizeElt = size;\n\t\n\t    _this.state = grid;\n\t\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Baseplate, [{\n\t    key: \"render\",\n\t    value: function render() {\n\t\n\t      var style = {\n\t        width: this.state.sizeElt,\n\t        height: this.state.sizeElt\n\t      };\n\t\n\t      var className = \"lego darkgrey\";\n\t      var onClick = undefined;\n\t\n\t      var divs = [];\n\t      for (var y = this.state.minY; y < this.state.maxY; y++) {\n\t        if (y === 0) continue;\n\t        for (var x = this.state.minX; x < this.state.maxX; x++) {\n\t          if (x === 0) continue;\n\t          divs.push(React.createElement(\"div\", { key: y + \"_\" + x, className: className, style: style, x: x, y: y }));\n\t        }\n\t      }\n\t\n\t      return React.createElement(\n\t        \"div\",\n\t        { className: \"baseplate\", style: { width: this.state.width, height: this.state.height } },\n\t        divs\n\t      );\n\t    }\n\t  }, {\n\t    key: \"componentDidMount\",\n\t    value: function componentDidMount() {\n\t      this.props.children.forEach(function (child) {\n\t        var selectElts = document.querySelectorAll(child.props.bricks.map(function (brick) {\n\t          return \"[x='\" + brick.x + \"'][y='\" + brick.y + \"']\";\n\t        }).join(\",\"));\n\t        selectElts.forEach(function (elt) {\n\t          elt.className = child.props.classShape;\n\t          if (!child.props.onTouchStart && !child.props.onTouchEnd && !child.props.activeClassShape) return;\n\t          elt.addEventListener(\"touchstart\", function (e) {\n\t            if (child.props.activeClassShape) {\n\t              selectElts.forEach(function (elem) {\n\t                elem.className = child.props.activeClassShape;\n\t              });\n\t            }\n\t            if (child.props.onTouchStart) {\n\t              child.props.onTouchStart();\n\t            }\n\t          });\n\t          elt.addEventListener(\"touchend\", function (e) {\n\t            if (child.props.classShape) {\n\t              selectElts.forEach(function (elem) {\n\t                elem.className = child.props.classShape;\n\t              });\n\t            } else {\n\t              elt.className = \"lego darkgrey\";\n\t            }\n\t            if (child.props.onTouchEnd) {\n\t              child.props.onTouchEnd();\n\t            }\n\t          });\n\t        });\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Baseplate;\n\t}(React.Component);\n\t\n\tBaseplate.defaultProps = {\n\t  height: 10,\n\t  width: 10\n\t};\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.BrickShape = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar BrickShape = exports.BrickShape = function (_React$Component) {\n\t    _inherits(BrickShape, _React$Component);\n\t\n\t    function BrickShape(props, context) {\n\t        _classCallCheck(this, BrickShape);\n\t\n\t        return _possibleConstructorReturn(this, (BrickShape.__proto__ || Object.getPrototypeOf(BrickShape)).call(this, props, context));\n\t    }\n\t\n\t    _createClass(BrickShape, [{\n\t        key: 'render',\n\t        value: function render() {}\n\t    }]);\n\t\n\t    return BrickShape;\n\t}(React.Component);\n\t\n\tBrickShape.defaultProps = {\n\t    height: 1,\n\t    width: 1\n\t};\n\n/***/ },\n/* 33 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar BluetoothDevice = exports.BluetoothDevice = function () {\n\t\tfunction BluetoothDevice(name, disconnectFct) {\n\t\t\t_classCallCheck(this, BluetoothDevice);\n\t\n\t\t\tthis.name = name;\n\t\t\tthis.services = {};\n\t\t\tthis.device = undefined;\n\t\t\tthis.server = undefined;\n\t\t\tthis.disconnectFct = disconnectFct;\n\t\t}\n\t\n\t\t_createClass(BluetoothDevice, [{\n\t\t\tkey: \"addService\",\n\t\t\tvalue: function addService(id, uuid) {\n\t\t\t\tthis.services[id] = new BluetoothService(uuid);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"addCharacteristic\",\n\t\t\tvalue: function addCharacteristic(id, cId, uuid) {\n\t\t\t\tif (!this.services[id]) {\n\t\t\t\t\tthrow new Error(\"Service id unknowned :\" + id);\n\t\t\t\t}\n\t\t\t\tthis.services[id].characteristics[cId] = new BluetoothCharacteristic(uuid);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getDevice\",\n\t\t\tvalue: function getDevice() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tif (this.device) {\n\t\t\t\t\treturn Promise.resolve(this.device);\n\t\t\t\t} else {\n\t\n\t\t\t\t\tvar filters = [{\n\t\t\t\t\t\tname: this.name\n\t\t\t\t\t}];\n\t\n\t\t\t\t\tif (this.services) {\n\t\t\t\t\t\tfilters[0].services = [];\n\t\t\t\t\t\tObject.keys(this.services).forEach(function (key) {\n\t\t\t\t\t\t\tfilters[0].services.push(_this.services[key].uuid);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn navigator.bluetooth.requestDevice({ filters: filters }).then(function (device) {\n\t\t\t\t\t\t_this.device = device;\n\t\t\t\t\t\tdevice.addEventListener('gattserverdisconnected', _this.onDisconnected.bind(_this));\n\t\t\t\t\t\treturn device;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"connect\",\n\t\t\tvalue: function connect() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tif (this.server) {\n\t\t\t\t\treturn Promise.resolve(this.server);\n\t\t\t\t} else {\n\t\t\t\t\treturn this.getDevice().then(function (device) {\n\t\t\t\t\t\treturn device.gatt.connect();\n\t\t\t\t\t}).then(function (server) {\n\t\t\t\t\t\t_this2.server = server;\n\t\t\t\t\t\treturn server;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getService\",\n\t\t\tvalue: function getService(id) {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tif (!this.services[id]) {\n\t\t\t\t\tthrow new Error(\"Service id unknowned :\" + id);\n\t\t\t\t}\n\t\t\t\tif (!this.server) {\n\t\t\t\t\tthrow new Error(\"Server GATT not initialized.\");\n\t\t\t\t}\n\t\t\t\tif (this.services[id].service) {\n\t\t\t\t\treturn Promise.resolve(this.services[id]);\n\t\t\t\t} else {\n\t\t\t\t\treturn this.connect().then(function (server) {\n\t\t\t\t\t\treturn _this3.server.getPrimaryService(_this3.services[id].uuid);\n\t\t\t\t\t}).then(function (service) {\n\t\t\t\t\t\t_this3.services[id].service = service;\n\t\t\t\t\t\treturn _this3.services[id];\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"onDisconnected\",\n\t\t\tvalue: function onDisconnected() {\n\t\t\t\tthis.server = undefined;\n\t\t\t\tfor (var serviceId in this.services) {\n\t\t\t\t\tvar serv = this.services[serviceId];\n\t\t\t\t\tdelete serv.service;\n\t\t\t\t\tfor (var characteristicId in serv.characteristics) {\n\t\t\t\t\t\tvar charact = serv.characteristics[characteristicId];\n\t\t\t\t\t\tdelete charact.characteristic;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (this.disconnectFct) {\n\t\t\t\t\tthis.disconnectFct();\n\t\t\t\t}\n\t\t\t\tconsole.log('Device ' + this + ' is disconnected.');\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"disconnect\",\n\t\t\tvalue: function disconnect() {\n\t\t\t\tif (!this.device) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tif (this.device.gatt.connected) {\n\t\t\t\t\tthis.device.gatt.disconnect();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Bluetooth Device is already disconnected');\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn BluetoothDevice;\n\t}();\n\t\n\tvar BluetoothService = exports.BluetoothService = function () {\n\t\tfunction BluetoothService(uuid) {\n\t\t\t_classCallCheck(this, BluetoothService);\n\t\n\t\t\tthis.uuid = uuid;\n\t\t\tthis.characteristics = {};\n\t\t\tthis.service = undefined;\n\t\t}\n\t\n\t\t_createClass(BluetoothService, [{\n\t\t\tkey: \"addCharacteristic\",\n\t\t\tvalue: function addCharacteristic(id, uuid) {\n\t\t\t\tthis.characteristics[id] = new BluetoothCharacteristic(uuid);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getCharacteristic\",\n\t\t\tvalue: function getCharacteristic(id) {\n\t\t\t\tvar _this4 = this;\n\t\n\t\t\t\tif (!this.characteristics[id]) {\n\t\t\t\t\tthrow new Error(\"Characteristic id unknowned :\" + id);\n\t\t\t\t}\n\t\t\t\tif (!this.service) {\n\t\t\t\t\tthrow new Error(\"Service not initialized.\");\n\t\t\t\t}\n\t\t\t\tif (this.characteristics[id].characteristic) {\n\t\t\t\t\treturn Promise.resolve(this.characteristics[id]);\n\t\t\t\t} else {\n\t\t\t\t\treturn this.service.getCharacteristic(this.characteristics[id].uuid).then(function (characteristic) {\n\t\t\t\t\t\t_this4.characteristics[id].characteristic = characteristic;\n\t\t\t\t\t\treturn _this4.characteristics[id];\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn BluetoothService;\n\t}();\n\t\n\tvar BluetoothCharacteristic = exports.BluetoothCharacteristic = function () {\n\t\tfunction BluetoothCharacteristic(uuid) {\n\t\t\t_classCallCheck(this, BluetoothCharacteristic);\n\t\n\t\t\tthis.uuid = uuid;\n\t\t\tthis.characteristic = undefined;\n\t\t}\n\t\n\t\t_createClass(BluetoothCharacteristic, [{\n\t\t\tkey: \"write\",\n\t\t\tvalue: function write(arrayBuffer) {\n\t\t\t\tif (!this.characteristic) {\n\t\t\t\t\tPromise.reject(new Error(\"Characteristic not initialized, use getCharacteristic on service.\"));\n\t\t\t\t}\n\t\t\t\treturn this.characteristic.writeValue(arrayBuffer);\n\t\t\t}\n\t\t}]);\n\n\t\treturn BluetoothCharacteristic;\n\t}();\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Driver = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tvar _baseplane = __webpack_require__(31);\n\t\n\tvar _brickshape = __webpack_require__(32);\n\t\n\tvar _order = __webpack_require__(35);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Driver = exports.Driver = function (_React$Component) {\n\t  _inherits(Driver, _React$Component);\n\t\n\t  function Driver(props, context) {\n\t    _classCallCheck(this, Driver);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Driver.__proto__ || Object.getPrototypeOf(Driver)).call(this, props, context));\n\t\n\t    _this.timeOutAction = null;\n\t    _this.timeOutSession = null;\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Driver, [{\n\t    key: \"render\",\n\t    value: function render() {\n\t      var _this2 = this;\n\t\n\t      console.log(\"render\");\n\t      return React.createElement(\n\t        _baseplane.Baseplate,\n\t        { width: 18, height: 26 },\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[0].cells, classShape: \"lego grey upper\", activeClassShape: \"lego blue upper\", onTouchStart: function onTouchStart() {\n\t            return _this2.move(1);\n\t          }, onTouchEnd: function onTouchEnd() {\n\t            return _this2.move(0);\n\t          } }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[1].cells, classShape: \"lego grey upper\", activeClassShape: \"lego blue upper\", onTouchStart: function onTouchStart() {\n\t            return _this2.move(2);\n\t          }, onTouchEnd: function onTouchEnd() {\n\t            return _this2.move(0);\n\t          } }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[2].cells, classShape: \"lego grey upper\", activeClassShape: \"lego blue upper\", onTouchStart: function onTouchStart() {\n\t            return _this2.move(3);\n\t          }, onTouchEnd: function onTouchEnd() {\n\t            return _this2.move(0);\n\t          } }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[3].cells, classShape: \"lego grey upper\", activeClassShape: \"lego blue upper\", onTouchStart: function onTouchStart() {\n\t            return _this2.move(4);\n\t          }, onTouchEnd: function onTouchEnd() {\n\t            return _this2.move(0);\n\t          } }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[4].cells, classShape: \"lego grey upper\", activeClassShape: \"lego blue upper\", onTouchStart: function onTouchStart() {\n\t            return _this2.disconnect();\n\t          } }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[5].cells, classShape: \"lego grey upper\", activeClassShape: \"lego blue upper\", onTouchStart: function onTouchStart() {\n\t            return _this2.move(5);\n\t          }, onTouchEnd: function onTouchEnd() {\n\t            return _this2.move(0);\n\t          } }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[6].cells, classShape: \"lego grey upper\" }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[7].cells, classShape: \"lego grey upper\" }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[8].cells, classShape: \"lego grey upper\" }),\n\t        React.createElement(_brickshape.BrickShape, { bricks: this.props.shapes[9].cells, classShape: \"lego grey upper\" })\n\t      );\n\t    }\n\t  }, {\n\t    key: \"componentDidMount\",\n\t    value: function componentDidMount() {\n\t      this.timeOutSession = setTimeout(this.disconnect.bind(this), 120000);\n\t      this.timeOutAction = setTimeout(this.disconnect.bind(this), 10000);\n\t    }\n\t  }, {\n\t    key: \"componentWillUnmount\",\n\t    value: function componentWillUnmount() {\n\t      clearTimeout(this.timeOut);\n\t      clearTimeout(this.timeOutSession);\n\t    }\n\t  }, {\n\t    key: \"move\",\n\t    value: function move(direction) {\n\t      var _this3 = this;\n\t\n\t      clearTimeout(this.timeOutAction);\n\t      this.props.device.getService(\"sCommand\").then(function (service) {\n\t        return service.getCharacteristic(\"cCommand\");\n\t      }).then(function (characteristic) {\n\t        return characteristic.write(_this3.props.move.dataToSend([direction])).then(function () {\n\t          _this3.timeOutAction = setTimeout(_this3.disconnect.bind(_this3), 10000);\n\t        });\n\t      }).catch(function (error) {\n\t        _this3.showMessage(\"Erreur lors de l'envoi de la commande à LEO : \" + error + \". Deconnexion en cours...\");\n\t        console.log(error);\n\t        setTimeout(function () {\n\t          _this3.disconnect();\n\t        }, 3000);\n\t      });\n\t    }\n\t  }, {\n\t    key: \"disconnect\",\n\t    value: function disconnect() {\n\t      var _this4 = this;\n\t\n\t      this.showMessage(\"Au revoir...\");\n\t      setTimeout(function () {\n\t        _this4.showMessage(\"\");\n\t        _this4.props.device.disconnect();\n\t      }, 1000);\n\t    }\n\t  }, {\n\t    key: \"showMessage\",\n\t    value: function showMessage(msg) {\n\t      if (this.props.showMessage) {\n\t        this.props.showMessage(msg);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Driver;\n\t}(React.Component);\n\t\n\tDriver.defaultProps = {\n\t  move: new _order.Order(0x02),\n\t  color: new _order.Order(0x03),\n\t  shapes: [{ cells: [\n\t    //HAUT\n\t    { x: 9, y: 2 }, { x: 10, y: 2 }, { x: 8, y: 3 }, { x: 9, y: 3 }, { x: 10, y: 3 }, { x: 11, y: 3 }, { x: 7, y: 4 }, { x: 8, y: 4 }, { x: 9, y: 4 }, { x: 10, y: 4 }, { x: 11, y: 4 }, { x: 12, y: 4 }, { x: 6, y: 5 }, { x: 7, y: 5 }, { x: 8, y: 5 }, { x: 9, y: 5 }, { x: 10, y: 5 }, { x: 11, y: 5 }, { x: 12, y: 5 }, { x: 13, y: 5 }]\n\t  }, { cells: [\n\t    //BAS\n\t    { x: 9, y: 17 }, { x: 10, y: 17 }, { x: 8, y: 16 }, { x: 9, y: 16 }, { x: 10, y: 16 }, { x: 11, y: 16 }, { x: 7, y: 15 }, { x: 8, y: 15 }, { x: 9, y: 15 }, { x: 10, y: 15 }, { x: 11, y: 15 }, { x: 12, y: 15 }, { x: 6, y: 14 }, { x: 7, y: 14 }, { x: 8, y: 14 }, { x: 9, y: 14 }, { x: 10, y: 14 }, { x: 11, y: 14 }, { x: 12, y: 14 }, { x: 13, y: 14 }]\n\t  }, { cells: [\n\t    //GAUCHE\n\t    { x: 2, y: 9 }, { x: 2, y: 10 }, { x: 3, y: 8 }, { x: 3, y: 9 }, { x: 3, y: 10 }, { x: 3, y: 11 }, { x: 4, y: 7 }, { x: 4, y: 8 }, { x: 4, y: 9 }, { x: 4, y: 10 }, { x: 4, y: 11 }, { x: 4, y: 12 }, { x: 5, y: 6 }, { x: 5, y: 7 }, { x: 5, y: 8 }, { x: 5, y: 9 }, { x: 5, y: 10 }, { x: 5, y: 11 }, { x: 5, y: 12 }, { x: 5, y: 13 }]\n\t  }, { cells: [\n\t    //DROITE\n\t    { x: 17, y: 9 }, { x: 17, y: 10 }, { x: 16, y: 8 }, { x: 16, y: 9 }, { x: 16, y: 10 }, { x: 16, y: 11 }, { x: 15, y: 7 }, { x: 15, y: 8 }, { x: 15, y: 9 }, { x: 15, y: 10 }, { x: 15, y: 11 }, { x: 15, y: 12 }, { x: 14, y: 6 }, { x: 14, y: 7 }, { x: 14, y: 8 }, { x: 14, y: 9 }, { x: 14, y: 10 }, { x: 14, y: 11 }, { x: 14, y: 12 }, { x: 14, y: 13 }]\n\t  }, { cells: [\n\t    //CROIX\n\t    { x: 8, y: 20 }, { x: 11, y: 20 }, { x: 9, y: 21 }, { x: 10, y: 21 }, { x: 9, y: 22 }, { x: 10, y: 22 }, { x: 8, y: 23 }, { x: 11, y: 23 }]\n\t  }, { cells: [\n\t    //TOUPIE\n\t    { x: 7, y: 7 }, { x: 8, y: 7 }, { x: 9, y: 7 }, { x: 10, y: 7 }, { x: 11, y: 7 }, { x: 12, y: 7 }, { x: 7, y: 8 }, { x: 7, y: 9 }, { x: 7, y: 10 }, { x: 7, y: 11 }, { x: 7, y: 12 }, { x: 8, y: 12 }, { x: 9, y: 12 }, { x: 10, y: 12 }, { x: 11, y: 12 }, { x: 12, y: 12 }, { x: 12, y: 9 }, { x: 12, y: 10 }, { x: 12, y: 11 }, { x: 9, y: 9 }, { x: 10, y: 9 }, { x: 11, y: 9 }, { x: 9, y: 10 }]\n\t  }, { cells: [\n\t    //HAUT GAUCHE\n\t    { x: 3, y: 3 }, { x: 4, y: 3 }, { x: 5, y: 3 }, { x: 3, y: 4 }, { x: 3, y: 5 }]\n\t  }, { cells: [\n\t    //HAUT DROITE\n\t    { x: 14, y: 3 }, { x: 15, y: 3 }, { x: 16, y: 3 }, { x: 16, y: 4 }, { x: 16, y: 5 }]\n\t  }, { cells: [\n\t    //BAS GAUCHE\n\t    { x: 3, y: 14 }, { x: 3, y: 15 }, { x: 3, y: 16 }, { x: 4, y: 16 }, { x: 5, y: 16 }]\n\t  }, { cells: [\n\t    //BAS DROITE\n\t    { x: 14, y: 16 }, { x: 15, y: 16 }, { x: 16, y: 16 }, { x: 16, y: 14 }, { x: 16, y: 15 }]\n\t  }]\n\t};\n\n/***/ },\n/* 35 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Order = exports.Order = function () {\n\t\tfunction Order(code) {\n\t\t\t_classCallCheck(this, Order);\n\t\n\t\t\tthis.codeByte = code;\n\t\t\tthis.headerBytes = [0xBA, 0xBA, 0xAA, 0xAA];\n\t\t}\n\t\n\t\t_createClass(Order, [{\n\t\t\tkey: \"dataToSend\",\n\t\t\tvalue: function dataToSend(bytesValue) {\n\t\t\t\tvar buf = new ArrayBuffer(this.headerBytes.length + 1 + bytesValue.length);\n\t\t\t\tvar bufView = new Uint8Array(buf);\n\t\t\t\tvar idx = 0;\n\t\t\t\t// Gestion de l'inversion par paire des bytes\n\t\n\t\t\t\tfor (var i = 0; i < this.headerBytes.length; i += 1) {\n\t\t\t\t\tbufView[idx++] = this.headerBytes[i];\n\t\t\t\t}\n\t\n\t\t\t\tbufView[idx++] = this.codeByte;\n\t\n\t\t\t\t// Gestion de l'inversion par paire des bytes\n\t\t\t\tfor (var _i = 0; _i < bytesValue.length; _i += 1) {\n\t\t\t\t\tbufView[idx++] = bytesValue[_i];\n\t\t\t\t}\n\t\t\t\treturn buf;\n\t\t\t}\n\t\t}]);\n\n\t\treturn Order;\n\t}();\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Message = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar React = _interopRequireWildcard(_react);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Message = exports.Message = function (_React$Component) {\n\t  _inherits(Message, _React$Component);\n\t\n\t  function Message(props, context) {\n\t    _classCallCheck(this, Message);\n\t\n\t    return _possibleConstructorReturn(this, (Message.__proto__ || Object.getPrototypeOf(Message)).call(this, props, context));\n\t  }\n\t\n\t  _createClass(Message, [{\n\t    key: \"render\",\n\t    value: function render() {\n\t      return React.createElement(\n\t        \"div\",\n\t        null,\n\t        this.props.show && React.createElement(\n\t          \"div\",\n\t          { className: \"popin\" },\n\t          React.createElement(\"div\", { className: \"message\", dangerouslySetInnerHTML: this.props.message })\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return Message;\n\t}(React.Component);\n\t\n\t;\n\t\n\tMessage.defaultProps = {\n\t  show: false\n\t};\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** static/js/client.b491f7b7165283e2dd21.js\n **/","import * as React from \"react\"\nimport * as ReactDOM from \"react-dom\";\n\n//application\nimport {App} from \"./src/components/app\";\n\nReactDOM.render(<App/>, document.getElementById(\"app\"));\n\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","'use strict';\n\nmodule.exports = require('react/lib/ReactDOM');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/react-dom/index.js\n ** module id = 28\n ** module chunks = 0\n **/","import React from 'react'\nimport {Connect} from \"./connect\";\nimport {Driver} from \"./driver\";\nimport {Message} from \"./message\";\n\nexport class App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {connected: false, device: null, showMessage: false, message: \"\"};\n    if (!navigator.bluetooth) {\n      this.state.showMessage = true;\n      this.state.message = {__html: \"Interface Web Bluetooth indisponible. Veuillez l'activer :<p><a class='link' target=\\\"_blank\\\" href=\\\"chrome://flags/#enable-web-bluetooth\\\">chrome://flags/#enable-web-bluetooth</a></p>\"};\n    }\n  }\n\n  render() {\n    return (<div>\n      <Message show={this.state.showMessage} message={this.state.message}/>\n      {!this.state.connected ? (\n        <Connect connect={this.connect.bind(this)}  disconnect={this.disconnect.bind(this)} showMessage={this.showMessage.bind(this)}/>\n      ) : (\n        <Driver device={this.state.device} showMessage={this.showMessage.bind(this)}/>\n      )}\n    </div>);\n  }\n\n  connect(bleDevice) {\n    this.setState({connected: true, device: bleDevice });\n  }\n\n  disconnect() {\n    this.setState({connected: false, device: null });\n  }\n\n  showMessage(message) {\n    if (message) {\n      this.setState({showMessage: true, message: {__html: message} });\n    } else {\n      this.setState({showMessage: false, message: null });\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/app.jsx\n **/","import * as React from 'react'\nimport {Baseplate} from \"./baseplane\";\nimport {BrickShape} from \"./brickshape\";\nimport {BluetoothDevice} from \"../bluetooth/ble\";\n\nexport class Connect extends React.Component {\n\n    constructor(props, context) {\n      super(props, context);\n\n      this.bluetoothDevice = new BluetoothDevice(\"LEO\", this.onDisconnected.bind(this));\n      this.bluetoothDevice.addService(\"sCommand\", \"6e400001-b5a3-f393-e0a9-e50e24dcca9e\");\n      this.bluetoothDevice.addCharacteristic(\"sCommand\", \"cCommand\", \"6e400002-b5a3-f393-e0a9-e50e24dcca9e\");\n    }\n\n    render() {\n        return (\n            <Baseplate width={18} height={26}>\n              <BrickShape bricks={this.props.shapes[0].cells} classShape=\"lego blue upper\"/>\n              <BrickShape bricks={this.props.shapes[1].cells} onTouchEnd={(e) => this.connect()} classShape=\"lego grey upper\"/>\n            </Baseplate>\n\n        );\n    }\n\n    connect() {\n      console.log(\"connexion\");\n      this.showMessage(\"Connexion à Léo en cours...\");\n    \tthis.bluetoothDevice.connect()\n    \t.then(() => {\n    \t\treturn this.bluetoothDevice.getService(\"sCommand\");\n    \t})\n    \t.then((bluetoothService) => {\n    \t\treturn bluetoothService.getCharacteristic(\"cCommand\");\n    \t})\n    \t.then(() => {\n        this.showMessage(\"Vous êtes maintenant connecté à Léo... à vous de jouer !\");\n        setTimeout(() => {\n          if (this.props.connect) {\n            this.showMessage(\"\");\n            this.props.connect(this.bluetoothDevice);\n          }\n        }, 1000);\n    \t})\n      .catch(error => {\n        this.showMessage(\"Erreur lors de la connexion à Léo : \" + error);\n        console.log(error);\n        setTimeout(() => {\n          this.showMessage();\n        }, 3000);\n      });\n    }\n\n    onDisconnected() {\n      if (this.props.disconnect) {\n        this.props.disconnect();\n      }\n    }\n\n    showMessage(msg){\n      if (this.props.showMessage) {\n        this.props.showMessage(msg);\n      }\n    }\n\n}\n\nConnect.defaultProps = {\n  shapes : [{cells : [\n              //L\n              {x:3, y:2}, {x:3, y:3}, {x:3, y:4}, {x:3, y:5}, {x:3, y:6}, {x:4, y:6}, {x:5, y:6}, {x:6, y:6},\n               //E\n              {x:8, y:2}, {x:8, y:3}, {x:8, y:5}, {x:8, y:6},\n              {x:9, y:2}, {x:10, y:2}, {x:11, y:2},\n              {x:9, y:4}, {x:10, y:4},\n              {x:9, y:6}, {x:10, y:6}, {x:11, y:6},\n              // O\n              {x:13, y:2}, {x:13, y:3}, {x:13, y:4}, {x:13, y:5}, {x:13, y:6},\n              {x:14, y:2}, {x:15, y:2},\n              {x:14, y:6}, {x:15, y:6}, {x:16, y:6},\n              {x:16, y:3}, {x:16, y:4}, {x:16, y:5}\n          ]\n      },\n      {cells : [\n              {x:5, y:12}, {x:6, y:12}, {x:6, y:13}, {x:7, y:13}, {x:7, y:14}, {x:8, y:14}, {x:8, y:15},\n              {x:5, y:20}, {x:6, y:20}, {x:6, y:19}, {x:7, y:19}, {x:7, y:18}, {x:8, y:18}, {x:8, y:17},\n              {x:9, y:10}, {x:9, y:11}, {x:9, y:12}, {x:9, y:13}, {x:9, y:14}, {x:9, y:15}, {x:9, y:16}, {x:9, y:17}, {x:9, y:18}, {x:9, y:19}, {x:9, y:20}, {x:9, y:21}, {x:9, y:22},\n              {x:10, y:10}, {x:10, y:11}, {x:10, y:12}, {x:10, y:13}, {x:10, y:14}, {x:10, y:15}, {x:10, y:16}, {x:10, y:17}, {x:10, y:18}, {x:10, y:19}, {x:10, y:20}, {x:10, y:21}, {x:10, y:22},\n              {x:11, y:11}, {x:11, y:12}, {x:12, y:12}, {x:12, y:13}, {x:13, y:13}, {x:13, y:14}, {x:13, y:15}, {x:14, y:14},\n              {x:12, y:15}, {x:12, y:16}, {x:11, y:16},\n              {x:12, y:17}, {x:13, y:17}, {x:13, y:18}, {x:13, y:19}, {x:14, y:18},\n              {x:12, y:19}, {x:12, y:20}, {x:11, y:20}, {x:11, y:21}\n          ]\n          }]\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/connect.jsx\n **/","import * as React from 'react'\n\nexport class Baseplate extends React.Component {\n\n    constructor(props, context) {\n\n        super(props, context);\n\n        var screen = {\n            width : window.innerWidth,\n            height : window.innerHeight\n        } ;\n\n        var sizeX = screen.width / this.props.width ;\n        sizeX = sizeX > 40 ? 40 : Math.floor(sizeX) ;\n        var sizeY = screen.height / this.props.height ;\n        sizeY = sizeY > 40 ? 40 : Math.floor(sizeY) ;\n\n        if(sizeX < sizeY) sizeY = sizeX;\n        if(sizeY < sizeX) sizeX = sizeY;\n\n        var size = sizeX ;\n\n        var grid = {\n            nbOfCellsX : Math.ceil(Math.ceil(screen.width / size) / 2) * 2 ,\n            nbOfCellsY : Math.ceil(Math.ceil(screen.height / size) / 2) * 2 ,\n        };\n\n        grid.minX = (grid.nbOfCellsX - this.props.width) / -2;\n        grid.maxX = (grid.nbOfCellsX - this.props.width) / 2 + 1 + this.props.width ;\n        grid.minY = (grid.nbOfCellsY - this.props.height) / -2;\n        grid.maxY = (grid.nbOfCellsY - this.props.height) / 2 + 1 + this.props.height ;\n        grid.width = grid.nbOfCellsX * size ;\n        grid.height = grid.nbOfCellsY * size ;\n        grid.sizeElt = size ;\n\n        this.state = grid ;\n\n    }\n\n    render() {\n\n      let style = {\n        width: this.state.sizeElt,\n        height: this.state.sizeElt\n      }\n\n      let className = \"lego darkgrey\";\n      let onClick = undefined;\n\n      let divs = [];\n      for (let y = this.state.minY ; y < this.state.maxY ; y++) {\n        if(y === 0) continue ;\n        for(let x = this.state.minX ; x < this.state.maxX ; x++){\n          if(x === 0) continue ;\n          divs.push(<div key={y+\"_\"+x} className={className} style={style} x={x} y={y}/>);\n        }\n      }\n\n      return (\n        <div className=\"baseplate\" style={{width: this.state.width, height: this.state.height}}>\n          {divs}\n        </div>\n      );\n    }\n\n    componentDidMount() {\n      this.props.children.forEach((child) => {\n        let selectElts  = document.querySelectorAll(child.props.bricks.map((brick)=>{return \"[x='\"+brick.x+\"'][y='\"+brick.y+\"']\"}).join(\",\"));\n        selectElts.forEach((elt)=>{\n          elt.className = child.props.classShape;\n          if (!child.props.onTouchStart && !child.props.onTouchEnd && !child.props.activeClassShape) return;\n          elt.addEventListener(\"touchstart\", (e) => {\n            if (child.props.activeClassShape) {\n              selectElts.forEach((elem)=>{\n                elem.className = child.props.activeClassShape;\n              });\n            }\n            if (child.props.onTouchStart) {\n              child.props.onTouchStart();\n            }\n          });\n          elt.addEventListener(\"touchend\", (e) => {\n            if (child.props.classShape) {\n              selectElts.forEach((elem)=>{\n                elem.className = child.props.classShape;\n              });\n            } else {\n              elt.className = \"lego darkgrey\";\n            }\n            if (child.props.onTouchEnd) {\n              child.props.onTouchEnd();\n            }\n          });\n        });\n      });\n    }\n}\n\nBaseplate.defaultProps = {\n    height: 10,\n    width: 10\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/baseplane.jsx\n **/","import * as React from 'react'\n\nexport class BrickShape extends React.Component {\n\n    constructor(props, context) {\n        super(props, context);\n\n    }\n\n    render() {\n\n    }\n\n}\n\nBrickShape.defaultProps = {\n    height: 1,\n    width: 1\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/brickshape.jsx\n **/","export class BluetoothDevice {\n\n\tconstructor(name, disconnectFct) {\n\t\tthis.name = name;\n\t\tthis.services = {};\n\t\tthis.device = undefined;\n\t\tthis.server = undefined;\n\t\tthis.disconnectFct = disconnectFct;\n\t}\n\n\taddService(id, uuid) {\n\t\tthis.services[id] = new BluetoothService(uuid);\n\t}\n\n\taddCharacteristic(id, cId, uuid) {\n\t\tif (!this.services[id]) {\n\t\t\tthrow new Error(\"Service id unknowned :\" + id);\n\t\t}\n\t\tthis.services[id].characteristics[cId] = new BluetoothCharacteristic(uuid);\n\t}\n\n\tgetDevice() {\n\n\t\tif (this.device) {\n\t\t\treturn Promise.resolve(this.device);\n\t\t} else {\n\n\t\t\tlet filters = [{\n\t\t\t\tname: this.name\n\t\t\t}];\n\n\t\t\tif (this.services) {\n\t\t\t\tfilters[0].services = [];\n\t\t\t\tObject.keys(this.services).forEach((key) => {\n\t\t    \tfilters[0].services.push(this.services[key].uuid);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn navigator.bluetooth.requestDevice({filters: filters})\n\t\t  .then(device => {\n\t\t    this.device = device;\n\t\t    device.addEventListener('gattserverdisconnected', this.onDisconnected.bind(this));\n\t\t    return device;\n\t\t  })\n\t\t}\n\n\t}\n\n\tconnect() {\n\t\tif (this.server) {\n\t\t\treturn Promise.resolve(this.server);\n\t\t} else {\n\t\t\treturn this.getDevice().then((device) => {\n\t\t\t\treturn device.gatt.connect();\n\t\t\t}).then((server) => {\n\t\t\t\tthis.server = server;\n\t\t\t\treturn server;\n\t\t\t});\n\t\t}\n\t}\n\n\tgetService(id) {\n\t\tif (!this.services[id]) {\n\t\t\tthrow new Error(\"Service id unknowned :\" + id);\n\t\t}\n\t\tif (!this.server) {\n\t\t\tthrow new Error(\"Server GATT not initialized.\");\n\t\t}\n\t\tif (this.services[id].service) {\n\t\t\treturn Promise.resolve(this.services[id]);\n\t\t} else {\n\t\t\treturn this.connect().then(server => {\n\t\t\t\treturn this.server.getPrimaryService(this.services[id].uuid)\n\t\t  })\n\t\t\t.then((service) => {\n\t\t\t\tthis.services[id].service = service;\n\t\t\t\treturn this.services[id];\n\t\t\t});\n\t\t}\n\t}\n\n\tonDisconnected() {\n\t\tthis.server = undefined;\n\t\tfor(let serviceId in this.services) {\n\t\t\tlet serv = this.services[serviceId];\n\t\t\tdelete serv.service;\n\t\t\tfor(let characteristicId in serv.characteristics) {\n\t\t\t\tlet charact = serv.characteristics[characteristicId];\n\t\t\t\tdelete charact.characteristic;\n\t\t\t}\n\t\t}\n\n\t\tif (this.disconnectFct) {\n\t\t\tthis.disconnectFct();\n\t\t}\n\t  console.log('Device ' + this + ' is disconnected.');\n\t}\n\n\tdisconnect() {\n\t  if (!this.device) {\n\t    return;\n\t  }\n\n\t  if (this.device.gatt.connected) {\n\t    this.device.gatt.disconnect();\n\t  } else {\n\t    console.log('Bluetooth Device is already disconnected');\n\t  }\n\t}\n}\n\nexport class BluetoothService {\n\tconstructor(uuid) {\n\t\tthis.uuid = uuid;\n\t\tthis.characteristics = {};\n\t\tthis.service = undefined;\n\t}\n\n\taddCharacteristic(id, uuid) {\n\t\tthis.characteristics[id] = new BluetoothCharacteristic(uuid);\n\t}\n\n\n\tgetCharacteristic(id) {\n\t\tif (!this.characteristics[id]) {\n\t\t\tthrow new Error(\"Characteristic id unknowned :\" + id);\n\t\t}\n\t\tif (!this.service) {\n\t\t\tthrow new Error(\"Service not initialized.\");\n\t\t}\n\t\tif (this.characteristics[id].characteristic) {\n\t\t\treturn Promise.resolve(this.characteristics[id]);\n\t\t} else {\n\t\t\treturn this.service.getCharacteristic(this.characteristics[id].uuid)\n\t\t\t.then((characteristic) => {\n\t\t\t\tthis.characteristics[id].characteristic = characteristic;\n\t\t\t\treturn this.characteristics[id];\n\t\t\t});\n\t\t}\n\t}\n\n}\n\nexport class BluetoothCharacteristic{\n\tconstructor(uuid) {\n\t\tthis.uuid = uuid;\n\t\tthis.characteristic = undefined;\n\t}\n\n\twrite(arrayBuffer) {\n\t\tif (!this.characteristic) {\n\t\t\tPromise.reject(new Error(\"Characteristic not initialized, use getCharacteristic on service.\"));\n\t\t}\n\t\treturn this.characteristic.writeValue(arrayBuffer);\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bluetooth/ble.js\n **/","import * as React from 'react'\nimport {Baseplate} from \"./baseplane\";\nimport {BrickShape} from \"./brickshape\";\nimport {Order} from \"../bluetooth/order\";\n\nexport class Driver extends React.Component {\n\n    constructor(props, context) {\n      super(props, context);\n      this.timeOutAction = null;\n      this.timeOutSession = null;\n    }\n\n    render() {\n      console.log(\"render\");\n      return (\n        <Baseplate width={18} height={26}>\n          <BrickShape bricks={this.props.shapes[0].cells} classShape=\"lego grey upper\" activeClassShape=\"lego blue upper\" onTouchStart={() => this.move(1)} onTouchEnd={() => this.move(0)}/>\n          <BrickShape bricks={this.props.shapes[1].cells} classShape=\"lego grey upper\" activeClassShape=\"lego blue upper\" onTouchStart={() => this.move(2)} onTouchEnd={() => this.move(0)}/>\n          <BrickShape bricks={this.props.shapes[2].cells} classShape=\"lego grey upper\" activeClassShape=\"lego blue upper\" onTouchStart={() => this.move(3)} onTouchEnd={() => this.move(0)}/>\n          <BrickShape bricks={this.props.shapes[3].cells} classShape=\"lego grey upper\" activeClassShape=\"lego blue upper\" onTouchStart={() => this.move(4)} onTouchEnd={() => this.move(0)}/>\n          <BrickShape bricks={this.props.shapes[4].cells} classShape=\"lego grey upper\" activeClassShape=\"lego blue upper\" onTouchStart={() => this.disconnect()}/>\n          <BrickShape bricks={this.props.shapes[5].cells} classShape=\"lego grey upper\" activeClassShape=\"lego blue upper\" onTouchStart={() => this.move(5)} onTouchEnd={() => this.move(0)}/>\n          <BrickShape bricks={this.props.shapes[6].cells} classShape=\"lego grey upper\"/>\n          <BrickShape bricks={this.props.shapes[7].cells} classShape=\"lego grey upper\"/>\n          <BrickShape bricks={this.props.shapes[8].cells} classShape=\"lego grey upper\"/>\n          <BrickShape bricks={this.props.shapes[9].cells} classShape=\"lego grey upper\"/>\n        </Baseplate>\n      );\n    }\n\n    componentDidMount() {\n      this.timeOutSession = setTimeout(this.disconnect.bind(this), 120000);\n      this.timeOutAction = setTimeout(this.disconnect.bind(this), 10000);\n    }\n\n    componentWillUnmount() {\n      clearTimeout(this.timeOut);\n      clearTimeout(this.timeOutSession);\n    }\n\n    move(direction) {\n      clearTimeout(this.timeOutAction);\n      this.props.device.getService(\"sCommand\")\n      .then((service) => {\n        return service.getCharacteristic(\"cCommand\")\n      })\n      .then((characteristic) => {\n        return characteristic.write(this.props.move.dataToSend([direction]))\n               .then(() => { this.timeOutAction = setTimeout(this.disconnect.bind(this), 10000);});\n      }).catch(error => {\n        this.showMessage(\"Erreur lors de l'envoi de la commande à LEO : \" + error + \". Deconnexion en cours...\");\n        console.log(error);\n        setTimeout(() => {\n          this.disconnect();\n        }, 3000);\n      });\n    }\n\n    disconnect() {\n      this.showMessage(\"Au revoir...\");\n      setTimeout(() => {\n        this.showMessage(\"\");\n        this.props.device.disconnect();\n      }, 1000);\n    }\n\n\n    showMessage(msg){\n      if (this.props.showMessage) {\n        this.props.showMessage(msg);\n      }\n    }\n}\n\nDriver.defaultProps = {\n  move: new Order(0x02),\n  color: new Order(0x03),\n  shapes : [{cells : [\n              //HAUT\n              {x:9, y:2}, {x:10, y:2},\n              {x:8, y:3}, {x:9, y:3}, {x:10, y:3}, {x:11, y:3},\n              {x:7, y:4}, {x:8, y:4}, {x:9, y:4}, {x:10, y:4},{x:11, y:4}, {x:12, y:4},\n              {x:6, y:5}, {x:7, y:5}, {x:8, y:5}, {x:9, y:5},{x:10, y:5}, {x:11, y:5}, {x:12, y:5}, {x:13, y:5}\n          ]\n      },\n      {cells : [\n            //BAS\n            {x:9, y:17}, {x:10, y:17},\n            {x:8, y:16}, {x:9, y:16}, {x:10, y:16}, {x:11, y:16},\n            {x:7, y:15}, {x:8, y:15}, {x:9, y:15}, {x:10, y:15}, {x:11, y:15}, {x:12, y:15},\n            {x:6, y:14}, {x:7, y:14}, {x:8, y:14}, {x:9, y:14}, {x:10, y:14}, {x:11, y:14}, {x:12, y:14}, {x:13, y:14}\n        ]\n      },\n      {cells : [\n            //GAUCHE\n            {x:2, y:9}, {x:2, y:10},\n            {x:3, y:8}, {x:3, y:9}, {x:3, y:10}, {x:3, y:11},\n            {x:4, y:7}, {x:4, y:8}, {x:4, y:9}, {x:4, y:10}, {x:4, y:11}, {x:4, y:12},\n            {x:5, y:6}, {x:5, y:7}, {x:5, y:8}, {x:5, y:9}, {x:5, y:10}, {x:5, y:11}, {x:5, y:12}, {x:5, y:13}\n        ]\n      },\n      {cells : [\n            //DROITE\n            {x:17, y:9}, {x:17, y:10},\n            {x:16, y:8}, {x:16, y:9}, {x:16, y:10}, {x:16, y:11},\n            {x:15, y:7}, {x:15, y:8}, {x:15, y:9}, {x:15, y:10}, {x:15, y:11}, {x:15, y:12},\n            {x:14, y:6}, {x:14, y:7}, {x:14, y:8}, {x:14, y:9}, {x:14, y:10}, {x:14, y:11}, {x:14, y:12}, {x:14, y:13}\n        ]\n      },\n      {cells : [\n            //CROIX\n            {x:8, y:20}, {x:11, y:20},\n            {x:9, y:21}, {x:10, y:21}, {x:9, y:22}, {x:10, y:22},\n            {x:8, y:23}, {x:11, y:23}\n        ]\n      },\n      {cells : [\n            //TOUPIE\n            {x:7, y:7}, {x:8, y:7}, {x:9, y:7}, {x:10, y:7}, {x:11, y:7}, {x:12, y:7},\n            {x:7, y:8}, {x:7, y:9}, {x:7, y:10}, {x:7, y:11}, {x:7, y:12},\n            {x:8, y:12}, {x:9, y:12}, {x:10, y:12}, {x:11, y:12}, {x:12, y:12},\n            {x:12, y:9}, {x:12, y:10}, {x:12, y:11},\n            {x:9, y:9}, {x:10, y:9}, {x:11, y:9},\n            {x:9, y:10}\n        ]\n      },\n      {cells : [\n            //HAUT GAUCHE\n            {x:3, y:3}, {x:4, y:3}, {x:5, y:3},\n            {x:3, y:4}, {x:3, y:5}\n        ]\n      },\n      {cells : [\n            //HAUT DROITE\n            {x:14, y:3}, {x:15, y:3}, {x:16, y:3},\n            {x:16, y:4}, {x:16, y:5}\n        ]\n      },\n      {cells : [\n            //BAS GAUCHE\n            {x:3, y:14}, {x:3, y:15}, {x:3, y:16},\n            {x:4, y:16}, {x:5, y:16}\n        ]\n      },\n      {cells : [\n            //BAS DROITE\n            {x:14, y:16}, {x:15, y:16}, {x:16, y:16},\n            {x:16, y:14}, {x:16, y:15}\n        ]\n      }]\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/driver.jsx\n **/","export class Order {\n\n\tconstructor(code) {\n\t\tthis.codeByte = code;\n\t\tthis.headerBytes = [0xBA, 0xBA, 0xAA, 0xAA ];\n\t}\n\n\tdataToSend(bytesValue) {\n\t  var buf = new ArrayBuffer(this.headerBytes.length + 1 + bytesValue.length);\n\t  var bufView = new Uint8Array(buf);\n\t  var idx = 0;\n\t  // Gestion de l'inversion par paire des bytes\n\n\t  for (let i = 0; i < this.headerBytes.length; i+=1) {\n\t    bufView[idx++] = this.headerBytes[i];\n\t  }\n\n\t  bufView[idx++] = this.codeByte;\n\n\t  // Gestion de l'inversion par paire des bytes\n\t  for (let i = 0; i < bytesValue.length; i+=1) {\n\t    bufView[idx++] = bytesValue[i];\n\t  }\n\t  return buf;\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bluetooth/order.js\n **/","import * as React from 'react'\n\nexport class Message extends React.Component {\n\n    constructor(props, context) {\n        super(props, context);\n    }\n\n    render() {\n      return(\n        <div>\n        {this.props.show &&\n          <div className=\"popin\">\n            <div className=\"message\" dangerouslySetInnerHTML={this.props.message}>\n\n            </div>\n          </div>\n        }\n      </div>\n      );\n  }\n\n};\n\nMessage.defaultProps = {\n    show: false\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/message.jsx\n **/"],"sourceRoot":""}